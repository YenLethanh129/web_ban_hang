<div class="login-page">
  <div class="login-container">
    <div class="login-form-wrapper">
      <div class="login-header">
        <div class="brand-section">
          <h1 class="brand-title">FUNNY BOY</h1>
          <p class="brand-subtitle">Coffee & Tea</p>
        </div>
        <h2 class="login-title">Đăng nhập tài khoản</h2>
        <p class="login-subtitle">Chào mừng bạn quay trở lại!</p>
      </div>

      <form (ngSubmit)="onSubmit()" #loginForm="ngForm" class="login-form">
        <div class="form-group">
          <label for="phoneNumber" class="form-label">
            <i class="fas fa-phone"></i>
            Số điện thoại
          </label>
          <div class="input-wrapper">
            <input
              type="tel"
              class="form-control"
              id="phoneNumber"
              name="phoneNumber"
              [(ngModel)]="loginData.phoneNumber"
              (input)="validatePhoneNumber($event)"
              (focus)="showPhoneError = true"
              required
              #phone="ngModel"
              placeholder="Nhập số điện thoại của bạn"
            />
            <i class="fas fa-phone input-icon"></i>
          </div>
          <div
            *ngIf="showPhoneError && phone.touched && !phoneValidation.isValid"
            class="error-message"
          >
            <i class="fas fa-exclamation-circle"></i>
            <span *ngFor="let error of phoneValidation.errors">{{
              error
            }}</span>
          </div>
        </div>

        <div class="form-group">
          <label for="password" class="form-label">
            <i class="fas fa-lock"></i>
            Mật khẩu
          </label>
          <div class="input-wrapper password-wrapper">
            <input
              [type]="showPassword ? 'text' : 'password'"
              class="form-control"
              id="password"
              name="password"
              [(ngModel)]="loginData.password"
              (focus)="showPasswordError = true"
              (input)="validatePassword($event)"
              required
              #password="ngModel"
              placeholder="Nhập mật khẩu"
            />
            <i class="fas fa-lock input-icon"></i>
            <i
              class="fa-solid password-toggle"
              [class.fa-eye]="!showPassword"
              [class.fa-eye-slash]="showPassword"
              (click)="togglePasswordVisibility()"
            ></i>
          </div>
          <div
            *ngIf="
              showPasswordError &&
              password.touched &&
              !passwordValidation.isValid
            "
            class="error-message"
          >
            <i class="fas fa-exclamation-circle"></i>
            <span *ngFor="let error of passwordValidation.errors">{{
              error
            }}</span>
          </div>
        </div>

        <div class="form-options">
          <div class="remember-me">
            <input type="checkbox" id="remember" name="remember" />
            <label for="remember">
              <span class="checkmark"></span>
              Ghi nhớ đăng nhập
            </label>
          </div>
          <a routerLink="/forgot-password" class="forgot-password">
            <i class="fas fa-question-circle"></i>
            Quên mật khẩu?
          </a>
        </div>

        <button
          type="submit"
          class="btn btn-primary login-button"
          [disabled]="isLoading"
          [class.disabled]="!validateForm()"
        >
          <span *ngIf="isLoading" class="loading-spinner"></span>
          <i *ngIf="!isLoading" class="fas fa-sign-in-alt"></i>
          {{ isLoading ? "Đang xử lý..." : "Đăng nhập" }}
        </button>
        <!-- Show error when login fails -->
        <div *ngIf="showErrorLoginMessage" class="error-message">
          <i class="fas fa-exclamation-circle"></i>
          {{ errorLoginMessage }}
        </div>

        <div class="divider">
          <span>hoặc</span>
        </div>

        <div class="register-link">
          <p>Chưa có tài khoản?</p>
          <a [routerLink]="['/register']" class="register-btn">
            <i class="fas fa-user-plus"></i>
            Đăng ký ngay
          </a>
        </div>
      </form>
    </div>
  </div>
</div>
